{"version":3,"file":"fun.mjs","sources":["../../src/fun.mjs"],"sourcesContent":["let confetti = null;\n\nasync function lazyLoadConfetti() {\n  if (confetti === null) {\n    try {\n      const module = await import(\n        'https://cdn.jsdelivr.net/npm/canvas-confetti@1.2.0/dist/confetti.module.mjs'\n      );\n      confetti = module.default;\n    } catch (e) {\n      confetti = null;\n      console.error(\n        'There was problem fetching the confetti cannon',\n        e.message\n      );\n    }\n  }\n}\nlet funEnabled = false;\n\nconst butt = document.getElementById('fun-button');\nbutt.addEventListener('mouseover', lazyLoadConfetti);\nbutt.addEventListener('touchstart', lazyLoadConfetti);\nbutt.addEventListener('click', function (e) {\n  const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)')\n    .matches;\n\n  if (reduceMotion) {\n    alert(\n      'Sorry, you have set to prefer reduced motion, fun mode is based on motion and color shifting.'\n    );\n  } else if (!funEnabled) {\n    console.log(\n      '%cFun Mode! ðŸ¥³',\n      'display:inline-block;padding:20px;border-radius:50px;line-height:3.5;font-size:x-large;font-family:fantasy;background:linear-gradient(to right, red, orange , yellow, green, cyan, blue, violet);'\n    );\n    document.body.classList.add('fun');\n    document.querySelectorAll('img.emoji').forEach(function (el) {\n      el.setAttribute('src', '/assets/images/parrot.gif');\n    });\n    document.querySelectorAll('.emoji[role=\"img\"], .icon').forEach(function (el) {\n      el.innerHTML =\n        '<img height=\"20\" width=\"20\" style=\"margin-bottom:0;\" src=\"/assets/images/parrot.gif\" alt=\"party parrot\" />';\n    });\n    funEnabled = true;\n  }\n\n  if (!reduceMotion && confetti !== null) {\n    console.log('ðŸŽ‰');\n    const count = 150;\n    const dx = window.innerWidth / 2 - e.clientX;\n    const dy = e.clientY - window.innerHeight / 2;\n    let theta = Math.atan2(dy, dx); // range (-PI, PI]\n    theta *= 180 / Math.PI; // rads to degs, range (-180, 180]\n    if (theta < 0) theta = 360 + theta; // range [0, 360)\n    const defaults = {\n      angle: theta,\n      origin: {\n        y: e.clientY / window.innerHeight,\n        x: e.clientX / window.innerWidth,\n      },\n      useWorker: true,\n    };\n\n    function fire(particleRatio, opts) {\n      confetti(\n        Object.assign({}, defaults, opts, {\n          particleCount: Math.floor(count * particleRatio),\n        })\n      );\n    }\n\n    fire(0.25, {\n      spread: 26,\n      startVelocity: 55,\n    });\n    fire(0.2, {\n      spread: 60,\n    });\n    fire(0.35, {\n      spread: 100,\n      decay: 0.91,\n    });\n    fire(0.1, {\n      spread: 120,\n      startVelocity: 25,\n      decay: 0.92,\n    });\n    fire(0.1, {\n      spread: 120,\n      startVelocity: 45,\n    });\n  }\n});\n"],"names":["confetti","async","lazyLoadConfetti","module","import","default","e","console","error","message","funEnabled","butt","document","getElementById","addEventListener","reduceMotion","window","matchMedia","matches","alert","log","body","classList","add","querySelectorAll","forEach","el","setAttribute","innerHTML","count","dx","innerWidth","clientX","dy","clientY","innerHeight","theta","Math","atan2","PI","defaults","angle","origin","y","x","useWorker","fire","particleRatio","opts","Object","assign","particleCount","floor","spread","startVelocity","decay"],"mappings":"yBAAA,IAAIA,EAAW,KAEfC,eAAeC,IACb,GAAiB,OAAbF,EACF,IACE,MAAMG,QAAeC,OACnB,+EAEFJ,EAAWG,EAAOE,QAClB,MAAOC,GACPN,EAAW,KACXO,QAAQC,MACN,iDACAF,EAAEG,UAKV,IAAIC,GAAa,EAEjB,MAAMC,EAAOC,SAASC,eAAe,cACrCF,EAAKG,iBAAiB,YAAaZ,GACnCS,EAAKG,iBAAiB,aAAcZ,GACpCS,EAAKG,iBAAiB,SAAS,SAAUR,GACvC,MAAMS,EAAeC,OAAOC,WAAW,oCACpCC,QAsBH,GApBIH,EACFI,MACE,iGAEQT,IACVH,QAAQa,IACN,iBACA,qMAEFR,SAASS,KAAKC,UAAUC,IAAI,OAC5BX,SAASY,iBAAiB,aAAaC,SAAQ,SAAUC,GACvDA,EAAGC,aAAa,MAAO,gCAEzBf,SAASY,iBAAiB,6BAA6BC,SAAQ,SAAUC,GACvEA,EAAGE,UACD,gHAEJlB,GAAa,IAGVK,GAA6B,OAAbf,EAAmB,CACtCO,QAAQa,IAAI,MACZ,MAAMS,EAAQ,IACRC,EAAKd,OAAOe,WAAa,EAAIzB,EAAE0B,QAC/BC,EAAK3B,EAAE4B,QAAUlB,OAAOmB,YAAc,EAC5C,IAAIC,EAAQC,KAAKC,MAAML,EAAIH,GAC3BM,GAAS,IAAMC,KAAKE,GAChBH,EAAQ,IAAGA,EAAQ,IAAMA,GAC7B,MAAMI,EAAW,CACfC,MAAOL,EACPM,OAAQ,CACNC,EAAGrC,EAAE4B,QAAUlB,OAAOmB,YACtBS,EAAGtC,EAAE0B,QAAUhB,OAAOe,YAExBc,WAAW,GAGb,SAASC,EAAKC,EAAeC,GAC3BhD,EACEiD,OAAOC,OAAO,GAAIV,EAAUQ,EAAM,CAChCG,cAAed,KAAKe,MAAMvB,EAAQkB,MAKxCD,EAAK,IAAM,CACTO,OAAQ,GACRC,cAAe,KAEjBR,EAAK,GAAK,CACRO,OAAQ,KAEVP,EAAK,IAAM,CACTO,OAAQ,IACRE,MAAO,MAETT,EAAK,GAAK,CACRO,OAAQ,IACRC,cAAe,GACfC,MAAO,MAETT,EAAK,GAAK,CACRO,OAAQ,IACRC,cAAe"}