<script>
    // https://github.com/jekyll/jekyll/blob/7f578b5dd88653583bdf3ad5ff703a6ee5d91b95/site/_includes/anchor_links.html
    var anchorForId = function (id) {
        var anchor = document.createElement("a");
        anchor.className = "header-link";
        anchor.href = "#" + id;
        anchor.innerHTML = '<span class="sr-only">Permalink</span>{%- include icon.html icon="link" -%}';
        anchor.title = "Permalink";
        return anchor;
    };
    var linkifyAnchors = function (level, containingElement) {
        var headers = containingElement.getElementsByTagName("h" + level);
        for (var h = 0; h < headers.length; h++) {
            var header = headers[h];
            if (typeof header.id !== "undefined" && header.id !== "") {
                header.appendChild(anchorForId(header.id));
            }
        }
    };
    document.onreadystatechange = function () {
        if (this.readyState === "interactive") { // some iframes never "completes"
            var contentBlock = document.getElementsByTagName("article")[0];
            if (!contentBlock) {
                return;
            }
            for (var level = 1; level <= 6; level++) {
                linkifyAnchors(level, contentBlock);
            }
        }
    };
</script>