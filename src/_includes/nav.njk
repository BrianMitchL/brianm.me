<nav aria-label="Primary" class="solid-link">
  <a href="{{ '/' | url }}" class="enhance">{{ site.title }}</a>
  <button style="float: right;" class="shake" id="fun-button" aria-hidden="true" title="Fun Mode">
    ðŸ¥³
  </button>
  {% set navPages = collections.all | eleventyNavigation %}
  <ul>
    {%- for entry in navPages %}
      <li{% if entry.url == page.url %} aria-current="page"{% endif %}>
        <a href="{{ entry.url | url }}">{{ entry.title }}</a>
      </li>
    {%- endfor %}
  </ul>
</nav>
<script nomodule>
  document.getElementById('fun-button').remove();
</script>
<script type="module" async>
  {%- set js -%}
  (function () {
    let erred = false;
    const importFun = () => import('{{ '/assets/js/fun.mjs' | url | hashify }}');
    async function haveFun(e) {
      try {
        (await importFun()).default(e);
      } catch (e) {
        if (!erred) {
          console.error(e);
          alert('There was a problem starting fun mode ðŸ˜­');
        }
        erred = true;
      }
    }
    const funButton = document.getElementById('fun-button');
    if (funButton) {
      funButton.addEventListener('mouseover', importFun);
      funButton.addEventListener('touchstart', importFun);
      funButton.addEventListener('click', haveFun);
    }
  })();
  {%- endset -%}
  {{ js | jsmin | safe }}
</script>
